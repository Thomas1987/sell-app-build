(function(t){function s(s){for(var a,r,o=s[0],l=s[1],c=s[2],d=0,p=[];d<o.length;d++)r=o[d],n[r]&&p.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(s);while(p.length)p.shift()();return i.push.apply(i,c||[]),e()}function e(){for(var t,s=0;s<i.length;s++){for(var e=i[s],a=!0,o=1;o<e.length;o++){var l=e[o];0!==n[l]&&(a=!1)}a&&(i.splice(s--,1),t=r(r.s=e[0]))}return t}var a={},n={app:0},i=[];function r(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=a,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)r.d(e,a,function(s){return t[s]}.bind(null,a));return e},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/sell-app-build/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=s,o=o.slice();for(var c=0;c<o.length;c++)s(o[c]);var u=l;i.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"05cc":function(t,s,e){},"31bf":function(t,s,e){"use strict";var a=e("a91e"),n=e.n(a);n.a},"3c10":function(t,s,e){"use strict";var a=e("8e1e"),n=e.n(a);n.a},"4d45":function(t,s,e){"use strict";var a=e("8b0c"),n=e.n(a);n.a},"56d7":function(t,s,e){"use strict";e.r(s);e("cadf"),e("551c"),e("f751"),e("097d");var a=e("2b0e"),n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("v-header",{attrs:{seller:t.seller}}),e("div",{staticClass:"tab border-1px"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/ratings"}},[t._v("评论")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),e("router-view",{attrs:{seller:t.seller}})],1)},i=[],r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"64",src:t.seller.avatar}})]),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),e("div",{staticClass:"description"},[t._v("\n        "+t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达\n      ")]),t.seller.supports?e("div",{staticClass:"support"},[e("span",{staticClass:"icon",class:t.classMap[t.seller.supports[0].type]}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t.seller.supports?e("div",{staticClass:"support-count",on:{click:t.showDetail}},[e("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),e("li",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),e("div",{staticClass:"bulletin-wrapper",on:{click:t.showDetail}},[e("span",{staticClass:"bulletin-title"}),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),e("li",{staticClass:"icon-keyboard_arrow_right"})]),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"detail"},[e("div",{staticClass:"detail-wrapper clearfix"},[e("div",{staticClass:"detail-main"},[e("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"star-wrapper"},[e("star",{attrs:{size:48,score:t.seller.score}})],1),e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("div",{staticClass:"text"},[t._v("优惠信息")]),e("div",{staticClass:"line"})]),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s,a){return e("li",{key:a,staticClass:"support-item"},[e("span",{staticClass:"icon",class:t.classMap[t.seller.supports[a].type]}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[a].description))])])}),0):t._e(),e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("div",{staticClass:"text"},[t._v("商家公告")]),e("div",{staticClass:"line"})]),e("div",{staticClass:"bulletin"},[e("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])])])]),e("div",{staticClass:"detail-close",on:{click:t.hideDetail}},[e("li",{staticClass:"icon-close"})])])])],1)},o=[],l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"star",class:t.starType},t._l(t.itemClasses,function(t,s){return e("span",{key:s,staticClass:"star-item",class:t})}),0)},c=[],u=(e("c5f6"),5),d="on",p="half",f="off",h={name:"",props:{size:{type:Number},score:{type:Number}},data:function(){return{}},mounted:function(){},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],s=Math.floor(2*this.score)/2,e=s%1!==0,a=Math.floor(s),n=0;n<a;n++)t.push(d);e&&t.push(p);while(t.length<u)t.push(f);return t}},methods:{}},v=h,m=(e("4d45"),e("2877")),C=Object(m["a"])(v,l,c,!1,null,"6c0f458f",null),_=C.exports,w={name:"v-header",props:{seller:{type:Object}},data:function(){return{detailShow:!1}},created:function(){this.classMap=["decrease","discount","guarantee","invoice","special"]},computed:{},methods:{showDetail:function(){this.detailShow=!0},hideDetail:function(){this.detailShow=!1}},components:{star:_}},g=w,b=(e("6c8f"),Object(m["a"])(g,r,o,!1,null,"63c98750",null)),y=b.exports,x=y,k=e("bc3a"),P=e.n(k),S=0;function O(t){return function(s){return P.a.get(t,{params:s}).then(function(t){var s=t.data,e=s.errno,a=s.data;if(e===S)return a}).catch(function(){})}}var j=O("/api/seller"),$=O("/api/goods"),E=(O("/api/ratings"),{data:function(){return{seller:{}}},created:function(){this._getSeller()},components:{"v-header":x},methods:{_getSeller:function(){var t=this;j().then(function(s){t.seller=s})}}}),N=E,T=(e("e936"),Object(m["a"])(N,n,i,!1,null,null,null)),M=T.exports,D=e("8c4f"),H=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"goods"},[e("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[e("ul",t._l(t.goods,function(s,a){return e("li",{key:a,ref:"menuList",refInFor:!0,staticClass:"menu-item",class:{current:t.currentIndex===a}},[e("span",{staticClass:"text  border-1px"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.type>0,expression:"item.type>0"}],staticClass:"icon",class:t.classMap[s.type]}),t._v(t._s(s.name)+"\n          ")])])}),0)]),e("div",{ref:"foodsWrapper",staticClass:"foods-wrapper"},[e("ul",t._l(t.goods,function(s,a){return e("li",{key:a,ref:"foodList",refInFor:!0,staticClass:"food-list food-list-hook"},[e("h1",{staticClass:"title"},[t._v(t._s(s.name))]),e("ul",t._l(s.foods,function(s,a){return e("li",{key:a,staticClass:"food-item border-1px"},[e("div",{staticClass:"icon"},[e("img",{attrs:{width:"57",height:"57",src:s.icon}})]),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(s.name))]),e("p",{staticClass:"desc"},[t._v(t._s(s.description))]),e("div",{staticClass:"extra"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount))]),e("span",[t._v("好评率"+t._s(s.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"+t._s(s.price))]),e("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))])]),e("div",{staticClass:"cartcontrol-wrapper"},[e("cartcontrol",{attrs:{food:s},on:{add:t.onAdd}})],1)])])}),0)])}),0)]),e("shopcart",{ref:"shopCart",attrs:{"select-foods":t.selectFoods,"delivery-price":t.seller.deliveryPrice,minPrice:t.seller.minPrice}})],1)])},F=[],L=(e("ac6a"),e("1fba")),B=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopcart"},[e("div",{staticClass:"content",on:{click:t.toggleList}},[e("div",{staticClass:"content-left"},[e("div",{staticClass:"logo-wrapper"},[e("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[e("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),e("div",{staticClass:"price"},[t._v(t._s(t.totalPrice)+"元")]),e("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),e("div",{staticClass:"content-right"},[e("div",{staticClass:"pay",class:t.payClass},[t._v("\n        "+t._s(t.payDesc)+"\n      ")])])]),e("div",{staticClass:"ball-container"},t._l(t.balls,function(s,a){return e("div",{key:a},[e("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"ball.show"}],staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])])],1)}),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[t._m(0),e("div",{staticClass:"list-content"},[e("ul",t._l(t.selectFoods,function(s,a){return e("li",{key:a,staticClass:"food"},[e("span",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"price"},[e("span",[t._v("￥"+t._s(s.price*s.count))])]),e("div",{staticClass:"cartcontrol-warpper"})])}),0)])])])},A=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"list-header"},[e("h1",{staticClass:"title"},[t._v("购物车")]),e("span",{staticClass:"empty"},[t._v("清空")])])}],I={name:"",props:{selectFoods:{type:Array,default:function(){return[{price:10,count:2}]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},components:{},mounted:function(){},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.price*s.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.count}),t},payDesc:function(){if(0===this.totalPrice)return"￥".concat(this.minPrice,"元起送");if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差￥".concat(t,"元起送")}return"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){if(!this.totalCount)return!1;var t=!this.fold;return t}},methods:{drop:function(t){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(!e.show)return e.show=!0,e.el=t,void this.dropBalls.push(e)}},beforeDrop:function(t){var s=this.balls.length;while(s--){var e=this.balls[s];if(e.show){var a=e.el.getBoundingClientRect(),n=a.left-32,i=-(window.innerHeight-a.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,".concat(i,"px,0)"),t.style.transform="translate3d(0,".concat(i,"px,0)");var r=t.getElementsByClassName("inner-hook")[0];r.style.webkitTransform="translate3d(".concat(n,"px,0,0)"),r.style.transform="translate3d(".concat(n,"px,0,0)")}}},dropping:function(t,s){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("inner-hook")[0];e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)",t.addEventListener("transitionend",s)})},afterDrop:function(t){var s=this.dropBalls.shift();s&&(s.show=!1,t.style.display="none")},toggleList:function(){if(!this.totalCount)return!1;this.fold=!this.fold}},watch:{selectFoods:function(t,s){0===t.length&&(this.fold=!0)}}},W=I,Y=(e("3c10"),Object(m["a"])(W,B,A,!1,null,null,null)),z=Y.exports,G=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartcontrol"},[e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-decrease",attrs:{transition:"move"},on:{click:t.decreaseCart}},[e("span",{staticClass:"inner icon-remove_circle_outline "})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),e("div",{staticClass:"cart-add icon-add_circle",on:{click:t.add}})],1)},J=[],R="add",q={name:"",props:{food:{type:Object}},data:function(){return{}},components:{},mounted:function(){},computed:{},methods:{add:function(t){this.food.count?this.food.count++:this.$set(this.food,"count",1),this.$emit(R,event.target)},decreaseCart:function(){this.food.count>0&&this.food.count--}}},K=q,Q=(e("d4da"),Object(m["a"])(K,G,J,!1,null,null,null)),U=Q.exports,V={name:"goods",props:{seller:{type:Object}},data:function(){return{goods:[],listHeight:[],scrollY:0}},created:function(){this.classMap=["decrease","discount","guarantee","invoice","special"],this._getGoods()},mounted:function(){},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var s=this.listHeight[t],e=this.listHeight[t+1];if(!e||this.scrollY>=s&&this.scrollY<e)return this._followScroll(t),t}return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(s){s.foods.forEach(function(s){s.count>0&&t.push(s)})}),t}},methods:{_getGoods:function(){var t=this;$().then(function(s){t.goods=s,t.$nextTick(function(){t._initScroll(),t._calculateHeight()})})},onAdd:function(t){this.$refs.shopCart.drop(t)},_initScroll:function(){var t=this;this.meunScroll=new L["a"](this.$refs.menuWrapper,{click:!0}),this.foodsScroll=new L["a"](this.$refs.foodsWrapper,{click:!0,probeType:3}),this.foodsScroll.on("scroll",function(s){s.y<=0&&(t.scrollY=Math.abs(Math.round(s.y)))})},_calculateHeight:function(){var t=this.$refs.foodList,s=0;this.listHeight.push(s);for(var e=0;e<t.length;e++){var a=t[e];s+=a.clientHeight,this.listHeight.push(s)}},_followScroll:function(t){var s=this.$refs.menuList,e=s[t];this.meunScroll.scrollToElement(e,300,0,-100)}},components:{shopcart:z,cartcontrol:U}},X=V,Z=(e("31bf"),Object(m["a"])(X,H,F,!1,null,null,null)),tt=Z.exports,st=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t._v("ratings")])},et=[],at={name:"",data:function(){return{}},components:{},mounted:function(){},computed:{},methods:{}},nt=at,it=Object(m["a"])(nt,st,et,!1,null,null,null),rt=it.exports,ot=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t._v("seller")])},lt=[],ct={name:"",data:function(){return{}},components:{},mounted:function(){},computed:{},methods:{}},ut=ct,dt=Object(m["a"])(ut,ot,lt,!1,null,null,null),pt=dt.exports;a["a"].use(D["a"]);var ft=new D["a"]({mode:"hash",base:"/sell-app-build/",linkActiveClass:"active",routes:[{path:"/",redirect:"/goods"},{path:"/goods",component:tt},{path:"/ratings",component:rt},{path:"/seller",component:pt}]}),ht=e("2f62");a["a"].use(ht["a"]);var vt=new ht["a"].Store({state:{},mutations:{},actions:{}});e("c000"),e("f867");a["a"].config.productionTip=!1,new a["a"]({router:ft,store:vt,render:function(t){return t(M)}}).$mount("#app")},"586c":function(t,s,e){},"6c8f":function(t,s,e){"use strict";var a=e("05cc"),n=e.n(a);n.a},"876d":function(t,s,e){},"8b0c":function(t,s,e){},"8e1e":function(t,s,e){},a91e:function(t,s,e){},c000:function(t,s,e){},d4da:function(t,s,e){"use strict";var a=e("586c"),n=e.n(a);n.a},e936:function(t,s,e){"use strict";var a=e("876d"),n=e.n(a);n.a},f867:function(t,s,e){}});
//# sourceMappingURL=app.131576d9.js.map